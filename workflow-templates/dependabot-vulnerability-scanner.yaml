name: Dependabot Vulnerability scanner 
on:
  push:
    branches: [ $default-branch ]
jobs:
  build:
    name: Checks
    runs-on: [microservices2]
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Run Trivy vulnerability scanner with rootfs command
        uses: aquasecurity/trivy-action@master
        with:
          scan-type: 'rootfs'
          scan-ref: #PROVIDE DIR TO SCAN
          ignore-unfixed: true
          output: 'dependency-results.sbom.json'
          severity: 'HIGH,CRITICAL'
          vuln-type: 'library'
          scanners: 'vuln'
          format: 'github'
          hide-progress	: false
          github-pat: ${{ secrets.GITHUB_TOKEN }}
      
         